<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>é›»è…¦è³‡æ–™æ¶æ§‹ç€è¦½å™¨</title>
</head>
<body>
    <h2>ğŸ“‚ é›»è…¦è³‡æ–™ç€è¦½</h2>
    <button onclick="loadDir('C:\\')">åˆ—å‡º C æ§½å…§å®¹</button>
    <ul id="file-list"></ul>

    <script>
        async function loadDir(path) {
            const res = await fetch(`/list_dir?path=${encodeURIComponent(path)}`);
            const data = await res.json();

            const list = document.getElementById('file-list');
            list.innerHTML = '';

            if (data.error) {
                list.innerHTML = `<li>âŒ éŒ¯èª¤ï¼š${data.error}</li>`;
                return;
            }

            list.innerHTML = `<li><b>ç›®å‰è·¯å¾‘ï¼š</b> ${data.path}</li>`;
            data.entries.forEach(item => {
                const li = document.createElement('li');
                li.textContent = (item.is_dir ? "ğŸ“ " : "ğŸ“„ ") + item.name;
                if (item.is_dir) {
                    li.style.cursor = 'pointer';
                    li.onclick = () => loadDir(item.path);
                }
                list.appendChild(li);
            });
        }
    </script>
</body>
</html>
